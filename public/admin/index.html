<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Melanie Zeyer - Blog Admin</title>
  
  <!-- Decap CMS styles -->
  <style>
    /* Custom styles matching site's color scheme */
    :root {
      --primary-color: #0097B2;
      --secondary-color: #70A6B0;
      --accent-color: #e8cd8c;
      --background-color: #FFFFFF;
      --text-color: #333333;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
        'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
        sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--background-color);
      color: var(--text-color);
    }
    
    /* Custom CMS styling */
    .nc-entryEditor-editor {
      font-family: inherit;
    }
    
    /* Loading screen styles */
    .loading-container {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background-color: var(--background-color);
    }
    
    .loading-content {
      text-align: center;
      color: var(--text-color);
    }
    
    .loading-logo {
      width: 80px;
      height: 80px;
      margin-bottom: 20px;
      opacity: 0.8;
    }
    
    .loading-text {
      font-size: 18px;
      font-weight: 500;
      margin-bottom: 10px;
      color: var(--primary-color);
    }
    
    .loading-subtext {
      font-size: 14px;
      color: var(--secondary-color);
    }
    
    /* Spinner animation */
    .spinner {
      border: 3px solid var(--secondary-color);
      border-top: 3px solid var(--primary-color);
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Hide loading screen when CMS loads */
    .nc-app-container ~ .loading-container {
      display: none;
    }
  </style>
</head>
<body>
  <!-- Loading screen -->
  <div class="loading-container" id="loading">
    <div class="loading-content">
      <svg class="loading-logo" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="45" stroke="var(--primary-color)" stroke-width="2" fill="var(--background-color)"/>
        <text x="50" y="55" font-family="Arial, sans-serif" font-size="20" font-weight="bold" 
              text-anchor="middle" fill="var(--primary-color)">MZ</text>
      </svg>
      <div class="loading-text">Blog Admin wird geladen...</div>
      <div class="spinner"></div>
      <div class="loading-subtext">Melanie Zeyer - Content Management System</div>
    </div>
  </div>
  
  <!-- Netlify Identity Widget -->
  <script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  
  <!-- Decap CMS -->
  <script type="text/javascript" src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  
  <!-- CMS Configuration and Initialization -->
  <script>
    // Wait for CMS to be available
    function initCMS() {
      if (typeof window.CMS === 'undefined') {
        setTimeout(initCMS, 100);
        return;
      }
      
      // Configure German locale
      if (window.CMS) {
        // Set German date format
        CMS.registerLocale('de', {
          auth: {
            login: 'Anmelden',
            loggingIn: 'Anmeldung läuft...',
            loginWithNetlifyIdentity: 'Mit Netlify Identity anmelden',
            errors: {
              email: 'Bitte geben Sie Ihre E-Mail-Adresse ein.',
              password: 'Bitte geben Sie Ihr Passwort ein.',
              identitySettings: 'Zugriff auf Identity-Einstellungen nicht möglich. Bei der Verwendung des git-gateway Backends stellen Sie sicher, dass Identity-Service und Git Gateway in Ihren Netlify-Einstellungen aktiviert sind.'
            }
          },
          app: {
            header: {
              content: 'Inhalte',
              workflow: 'Workflow',
              media: 'Medien',
              quickAdd: 'Schnell hinzufügen'
            },
            app: {
              errorHeader: 'Fehler beim Laden der CMS-Konfiguration',
              configErrors: 'Konfigurationsfehler',
              checkConfigYml: 'Überprüfen Sie Ihre config.yml-Datei.',
              loadingConfig: 'Konfiguration wird geladen...',
              waitingBackend: 'Warten auf Backend...'
            },
            notFoundPage: {
              header: 'Nicht gefunden'
            }
          },
          collection: {
            sidebar: {
              collections: 'Sammlungen',
              searchAll: 'Alle durchsuchen'
            },
            collectionTop: {
              viewAs: 'Anzeigen als',
              newButton: 'Neu %{collectionLabel}'
            },
            entries: {
              loadingEntries: 'Einträge werden geladen...',
              cachingEntries: 'Einträge werden zwischengespeichert...',
              longerLoading: 'Dies kann einige Minuten dauern'
            }
          },
          editor: {
            editorControl: {
              field: {
                optional: 'optional'
              }
            },
            editorControlPane: {
              widget: {
                required: '%{fieldLabel} ist erforderlich.',
                regexPattern: '%{fieldLabel} entspricht nicht dem Muster: %{pattern}.',
                processing: '%{fieldLabel} wird verarbeitet.',
                range: '%{fieldLabel} muss zwischen %{minValue} und %{maxValue} liegen.',
                min: '%{fieldLabel} muss mindestens %{minValue} sein.',
                max: '%{fieldLabel} darf höchstens %{maxValue} sein.',
                rangeCount: '%{fieldLabel} muss zwischen %{minCount} und %{maxCount} Elementen haben.',
                rangeCountExact: '%{fieldLabel} muss genau %{count} Elemente haben.',
                minCount: '%{fieldLabel} muss mindestens %{minCount} Elemente haben.',
                maxCount: '%{fieldLabel} darf höchstens %{maxCount} Elemente haben.'
              }
            },
            editor: {
              onLeavePage: 'Sind Sie sicher, dass Sie diese Seite verlassen möchten?',
              onUpdatingWithUnsavedChanges: 'Sie haben ungespeicherte Änderungen. Bitte speichern Sie diese, bevor Sie den Status aktualisieren.',
              onPublishingNotReady: 'Bitte aktualisieren Sie den Status auf "Bereit", bevor Sie veröffentlichen.',
              onPublishingWithUnsavedChanges: 'Sie haben ungespeicherte Änderungen. Bitte speichern Sie diese, bevor Sie veröffentlichen.',
              onPublishing: 'Sind Sie sicher, dass Sie diesen Eintrag veröffentlichen möchten?',
              onUnpublishing: 'Sind Sie sicher, dass Sie die Veröffentlichung dieses Eintrags rückgängig machen möchten?',
              onDeleteWithUnsavedChanges: 'Sind Sie sicher, dass Sie diesen veröffentlichten Eintrag sowie Ihre ungespeicherten Änderungen aus der aktuellen Sitzung löschen möchten?',
              onDeletePublishedEntry: 'Sind Sie sicher, dass Sie diesen veröffentlichten Eintrag löschen möchten?',
              onDeleteUnpublishedChangesWithUnsavedChanges: 'Dadurch werden alle unveröffentlichten Änderungen an diesem Eintrag sowie Ihre ungespeicherten Änderungen aus der aktuellen Sitzung gelöscht. Möchten Sie trotzdem löschen?',
              onDeleteUnpublishedChanges: 'Alle unveröffentlichten Änderungen an diesem Eintrag werden gelöscht. Möchten Sie trotzdem löschen?',
              loadingEntry: 'Eintrag wird geladen...',
              confirmLoadBackup: 'Eine lokale Sicherung wurde für diesen Eintrag wiederhergestellt. Möchten Sie sie verwenden?'
            },
            editorToolbar: {
              publishing: 'Veröffentlichen...',
              publish: 'Veröffentlichen',
              published: 'Veröffentlicht',
              unpublish: 'Veröffentlichung rückgängig machen',
              duplicate: 'Duplizieren',
              unpublishing: 'Veröffentlichung wird rückgängig gemacht...',
              publishAndCreateNew: 'Veröffentlichen und neu erstellen',
              deleteUnpublishedChanges: 'Unveröffentlichte Änderungen löschen',
              deleteUnpublishedEntry: 'Unveröffentlichten Eintrag löschen',
              deletePublishedEntry: 'Veröffentlichten Eintrag löschen',
              deleteEntry: 'Eintrag löschen',
              saving: 'Speichern...',
              save: 'Speichern',
              deleting: 'Löschen...',
              updating: 'Aktualisieren...',
              setStatus: 'Status festlegen',
              backCollection: 'Zurück zur %{collectionLabel}-Sammlung',
              unsavedChanges: 'Ungespeicherte Änderungen',
              changesSaved: 'Änderungen gespeichert',
              draft: 'Entwurf',
              inReview: 'In Überprüfung',
              ready: 'Bereit',
              publishNow: 'Jetzt veröffentlichen',
              deployPreviewPending: 'Vorschau-Deployment steht aus',
              deployPreviewInProgress: 'Vorschau-Deployment läuft',
              deployButtonLabel: 'Vorschau anzeigen'
            }
          }
        });
        
        // Initialize CMS with German locale
        CMS.init({
          locale: 'de'
        });
        
        // Hide loading screen once CMS initializes
        // Note: Decap CMS v3 doesn't have a 'ready' event, so we use a timeout
        setTimeout(function() {
          const loading = document.getElementById('loading');
          if (loading) {
            loading.style.display = 'none';
          }
        }, 2000);
      }
    }
    
    // Start initialization when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initCMS);
    } else {
      initCMS();
    }
    
    // Netlify Identity configuration
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on('init', user => {
        if (!user) {
          window.netlifyIdentity.on('login', () => {
            document.location.href = '/admin/';
          });
        }
      });
    }
    
    // Custom preview styles (removed as it causes errors)
    
    // Custom editor components if needed
    // CMS.registerEditorComponent({
    //   id: 'youtube',
    //   label: 'YouTube',
    //   fields: [{name: 'id', label: 'YouTube Video ID', widget: 'string'}],
    //   pattern: /^{{< youtube (\S+) >}}$/,
    //   fromBlock: function(match) {
    //     return {
    //       id: match[1]
    //     };
    //   },
    //   toBlock: function(obj) {
    //     return '{{< youtube ' + obj.id + ' >}}';
    //   },
    //   toPreview: function(obj) {
    //     return '<img src="http://img.youtube.com/vi/' + obj.id + '/maxresdefault.jpg" alt="Youtube Video"/>';
    //   }
    // });
  </script>
  
  <!-- Custom preview styles -->
  <style id="preview-styles">
    /* Preview styles matching the main site */
    .frame-content {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
        'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
        sans-serif;
      line-height: 1.6;
      color: #333333;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .frame-content h1,
    .frame-content h2,
    .frame-content h3,
    .frame-content h4,
    .frame-content h5,
    .frame-content h6 {
      color: #0097B2;
      font-weight: 600;
      line-height: 1.3;
      margin-top: 1.5em;
      margin-bottom: 0.5em;
    }
    
    .frame-content h1 {
      font-size: 2rem;
      border-bottom: 2px solid #e8cd8c;
      padding-bottom: 0.5rem;
    }
    
    .frame-content h2 {
      font-size: 1.5rem;
      color: #70A6B0;
    }
    
    .frame-content p {
      margin-bottom: 1em;
    }
    
    .frame-content a {
      color: #0097B2;
      text-decoration: none;
      border-bottom: 1px solid transparent;
      transition: border-bottom-color 0.2s ease;
    }
    
    .frame-content a:hover {
      border-bottom-color: #0097B2;
    }
    
    .frame-content img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      margin: 1em 0;
    }
    
    .frame-content blockquote {
      border-left: 4px solid #e8cd8c;
      margin: 1.5em 0;
      padding: 1em 1.5em;
      background-color: #f9f9f9;
      font-style: italic;
    }
    
    .frame-content code {
      background-color: #f4f4f4;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
    }
    
    .frame-content pre {
      background-color: #f4f4f4;
      padding: 1em;
      border-radius: 6px;
      overflow-x: auto;
      margin: 1em 0;
    }
    
    .frame-content pre code {
      background-color: transparent;
      padding: 0;
    }
    
    .frame-content ul,
    .frame-content ol {
      margin: 1em 0;
      padding-left: 2em;
    }
    
    .frame-content li {
      margin: 0.5em 0;
    }
  </style>
</body>
</html>